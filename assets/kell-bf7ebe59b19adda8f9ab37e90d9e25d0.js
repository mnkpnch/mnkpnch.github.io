"use strict"
define("kell/app",["exports","@ember/application","ember-resolver","ember-load-initializers","kell/config/environment"],function(e,t,r,n,i){function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var n=r.call(e,t||"default")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends t.default{constructor(...e){super(...e),a(this,"modulePrefix",i.default.modulePrefix),a(this,"podModulePrefix",i.default.podModulePrefix),a(this,"Resolver",r.default)}}e.default=o,(0,n.default)(o,i.default.modulePrefix)}),define("kell/components/data-view",["exports","@ember/component","@glimmer/component","@ember/service","@glimmer/tracking","@ember/object","@ember/template","@ember/template-factory"],function(e,t,r,n,i,a,o,l){var s,u,c,d,p,b,f
function m(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function h(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const g=(0,l.createTemplateFactory)({id:"96UAzfKQ",block:'[[[11,0],[17,1],[24,0,"data-view my-3"],[12],[1,"\\n\\t"],[10,0],[14,0,"d-flex justify-content-between"],[12],[1,"\\n\\t\\t"],[10,0],[14,0,"d-inline-flex page-size-select"],[12],[1,"\\n\\t\\t\\t"],[11,"select"],[24,"aria-controls","myTable"],[24,0,"form-select form-select-sm"],[24,1,"entry-count"],[4,[38,2],["change",[30,0,["pageSizeChanged"]]],null],[12],[1,"\\n\\t\\t\\t\\t"],[10,"option"],[14,2,"10"],[12],[1,"10"],[13],[1,"\\n\\t\\t\\t\\t"],[10,"option"],[14,2,"25"],[12],[1,"25"],[13],[1,"\\n\\t\\t\\t\\t"],[10,"option"],[14,2,"50"],[12],[1,"50"],[13],[1,"\\n\\t\\t\\t\\t"],[10,"option"],[14,2,"100"],[12],[1,"100"],[13],[1,"\\n\\t\\t\\t"],[13],[1,"\\n\\t\\t\\t"],[10,"label"],[14,"for","entry-count"],[12],[1," entries per page"],[13],[1,"\\n\\t\\t"],[13],[1,"\\n\\t\\t"],[10,0],[14,0,"row g-3 align-items-center"],[12],[1,"\\n\\t\\t  "],[10,0],[14,0,"col-auto"],[12],[1,"\\n\\t\\t    "],[10,"label"],[14,"for","table-search"],[14,0,"col-form-label"],[12],[1,"Filter:"],[13],[1,"\\n\\t\\t  "],[13],[1,"\\n\\t\\t  "],[10,0],[14,0,"col-auto"],[12],[1,"\\n\\t\\t    "],[11,"input"],[24,1,"table-search"],[24,0,"form-control form-control-sm"],[24,"aria-describedby","passwordHelpInline"],[24,4,"input"],[4,[38,2],["input",[30,0,["filterChanged"]]],null],[12],[13],[1,"\\n\\t\\t  "],[13],[1,"\\n\\t\\t"],[13],[1,"\\n\\t"],[13],[1,"\\n\\t"],[10,0],[14,0,"table-responsive"],[12],[1,"\\n\\t\\t"],[10,"table"],[14,0,"table table-sm table-striped table-responsive table-hover"],[12],[1,"\\n\\t\\t  "],[10,"thead"],[12],[1,"\\n\\t\\t    "],[10,"tr"],[12],[1,"\\n"],[42,[28,[37,10],[[28,[37,10],[[30,0,["columns"]]],null]],null],null,[[[1,"\\t\\t    \\t\\t"],[10,"th"],[14,"scope","col"],[12],[1,"\\n\\t\\t    \\t\\t\\t"],[10,0],[14,0,"d-flex justify-content-between align-items-end"],[12],[1,"\\n\\t\\t    \\t\\t\\t\\t"],[10,1],[12],[1,[28,[35,13],[[30,0,["columnNames"]],[30,2]],null]],[13],[1,"\\n\\t\\t    \\t\\t\\t\\t"],[8,[39,14],[[4,[38,2],["click",[28,[37,15],[[30,0,["handleSortClick"]],[30,2]],null]],null]],[["@sortColumn","@column","@sortDescending"],[[30,0,["tableData","sortColumn"]],[30,2],[30,0,["tableData","sortDescending"]]]],null],[1,"\\n\\t\\t    \\t\\t\\t"],[13],[1,"\\n\\t\\t    \\t\\t"],[13],[1,"\\n"]],[2]],null],[1,"\\t\\t    "],[13],[1,"\\n\\t\\t  "],[13],[1,"\\n\\t\\t  "],[10,"tbody"],[12],[1,"\\n"],[41,[28,[37,18],[[30,0,["tableData","variantsData","length"]],0],null],[[[1,"\\t\\t\\t  \\t"],[10,"tr"],[12],[1,"\\n\\t\\t\\t  \\t\\t"],[10,"td"],[14,0,"text-center"],[14,"colspan","6"],[12],[1,"No variants selected."],[13],[1,"\\n\\t\\t\\t  \\t"],[13],[1,"\\n"]],[]],[[[41,[28,[37,18],[[30,0,["tableData","filteredVariantsData","length"]],0],null],[[[1,"\\t\\t\\t  \\t"],[10,"tr"],[12],[1,"\\n\\t\\t\\t  \\t\\t"],[10,"td"],[14,0,"text-center"],[14,"colspan","6"],[12],[1,"No matching variants found."],[13],[1,"\\n\\t\\t\\t  \\t"],[13],[1,"\\n"]],[]],[[[42,[28,[37,10],[[28,[37,10],[[30,0,["tableData","paginatedVariantsData"]]],null]],null],null,[[[1,"\\t\\t\\t\\t    "],[11,"tr"],[16,0,[52,[28,[37,18],[[30,3,["variant"]],[30,0,["data","selectedVariant"]]],null],"table-active"]],[4,[38,2],["click",[28,[37,15],[[30,0,["rowClicked"]],[30,3,["variant"]]],null]],null],[4,[38,2],["mouseenter",[28,[37,15],[[30,0,["rowEntered"]],[30,3,["variant"]]],null]],null],[4,[38,2],["mouseleave",[28,[37,15],[[30,0,["rowLeft"]],[30,3,["variant"]]],null]],null],[12],[1,"\\n\\t\\t\\t\\t    \\t"],[10,"td"],[14,0,"font-monospace"],[12],[1,[30,3,["variant"]]],[13],[1,"\\n\\t\\t\\t\\t    \\t"],[10,"td"],[12],[1,[28,[35,13],[[30,0,["data","data","varTypes"]],[30,3,["varType"]]],null]],[13],[1,"\\n\\t\\t\\t\\t    \\t"],[10,"td"],[12],[1,[28,[30,0,["formatMaf"]],[[30,3,["maf"]]],null]],[13],[1,"\\n\\t\\t\\t\\t    \\t"],[10,"td"],[12],[1,[28,[30,0,["formatSa"]],[[30,3,["solventAccessibility"]]],null]],[13],[1,"\\n\\t\\t\\t\\t    \\t"],[10,"td"],[12],[8,[39,20],null,[["@ratingIcon","@ratingIconGap","@score","@fixed"],[[30,0,["ratingIcon"]],[30,0,["ratingIconGap"]],[30,3,["destabScore"]],[30,3,["fixed"]]]],null],[13],[1,"\\n\\t\\t\\t\\t    \\t"],[10,"td"],[12],[8,[39,20],null,[["@ratingIcon","@ratingIconGap","@score","@fixed"],[[30,0,["ratingIcon"]],[30,0,["ratingIconGap"]],[30,3,["agScore"]],[30,3,["fixed"]]]],null],[13],[1,"\\n\\t\\t\\t\\t    "],[13],[1,"\\n"]],[3]],null],[1,"\\t\\t\\t  "]],[]]]],[]]],[1,"\\t\\t  "],[13],[1,"\\n\\t\\t"],[13],[1,"\\n\\t"],[13],[1,"\\n\\t"],[10,0],[14,0,"d-flex justify-content-between align-items-center"],[12],[1,"\\n\\t\\t"],[10,0],[12],[1,"\\n\\t\\t\\t"],[10,2],[12],[1,"Entries "],[1,[30,0,["firstRowIndex"]]],[1," to "],[1,[30,0,["lastRowIndex"]]],[1," of "],[1,[30,0,["tableData","filteredVariantsData","length"]]],[41,[28,[37,22],[[30,0,["tableData","filteredVariantsData","length"]],[30,0,["tableData","variantsData","length"]]],null],[[[1," (filtered from "],[1,[30,0,["tableData","variantsData","length"]]],[1,")"]],[]],null],[13],[1,"\\n\\t\\t"],[13],[1,"\\n\\t\\t"],[8,[39,23],null,[["@pageIndex","@pageCount","@setPageIndex"],[[30,0,["tableData","pageIndex"]],[30,0,["tableData","pageCount"]],[30,0,["tableData","setPageIndex"]]]],null],[1,"\\n\\t"],[13],[1,"\\n"],[13],[1,"\\n"]],["&attrs","column","row"],["div","select","on","option","label","input","table","thead","tr","each","-track-array","th","span","get","sort-button","fn","tbody","if","eq","td","star-rating","p","not-eq","pagination"]]',moduleName:"kell/components/data-view.hbs",isStrictMode:!1})
let y=e.default=(s=class extends r.default{constructor(...e){super(...e),m(this,"ratingIcon",u,this),m(this,"ratingIconGap",c,this),m(this,"data",d,this),m(this,"tableData",p,this),m(this,"columns",b,this),m(this,"columnNames",f,this)}pageSizeChanged(e){const t=parseInt(e.target.value)
this.tableData.setPageSize(t)}filterChanged(e){const t=e.target.value.trim()
this.tableData.setFilter(t)}handleSortClick(e){e==this.tableData.sortColumn?this.tableData.setSortColumn(e,!this.tableData.sortDescending):this.tableData.setSortColumn(e)}formatSa(e){return null==e?"n/a":e}formatMaf(e){if(null==e)return"n/a"
if(0==e)return e
{const[t,r]=e.toExponential().split("e")
return(0,o.htmlSafe)(t+' x 10<span class="exponent">'+r+"</span>")}}rowClicked(e){console.log(e),this.data.selectedVariant=e}get firstRowIndex(){return this.tableData.filteredVariantsData.length>0?this.tableData.pageIndex*this.tableData.pageSize+1:0}get lastRowIndex(){const e=this.tableData.filteredVariantsData.length
return this.firstRowIndex-1+this.tableData.pageSize<=e?this.firstRowIndex-1+this.tableData.pageSize:this.tableData.filteredVariantsData.length}ratingIconChanged(e){const t=e.target.value
console.log(t),this.ratingIcon=t}ratingIconGapChanged(e){const t=e.target.checked
console.log(t),this.ratingIconGap=t}rowEntered(e){const t=parseInt(e.slice(1,-1))
this.data.setHoveredResidue(t)}rowLeft(e){this.data.clearHoveredResidue()}},u=h(s.prototype,"ratingIcon",[i.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"square"}}),c=h(s.prototype,"ratingIconGap",[i.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=h(s.prototype,"data",[n.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=h(s.prototype,"tableData",[n.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=h(s.prototype,"columns",[i.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["variant","varType","maf","solventAccessibility","destabScore","agScore"]}}),f=h(s.prototype,"columnNames",[i.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{variant:"Variant",varType:"Variant Type",solventAccessibility:"Solvent Accessibility",maf:"MAF Europe",destabScore:"Destabilizing",agScore:"Antigenicity"}}}),h(s.prototype,"pageSizeChanged",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"pageSizeChanged"),s.prototype),h(s.prototype,"filterChanged",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"filterChanged"),s.prototype),h(s.prototype,"handleSortClick",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"handleSortClick"),s.prototype),h(s.prototype,"rowClicked",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"rowClicked"),s.prototype),h(s.prototype,"ratingIconChanged",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"ratingIconChanged"),s.prototype),h(s.prototype,"ratingIconGapChanged",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"ratingIconGapChanged"),s.prototype),h(s.prototype,"rowEntered",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"rowEntered"),s.prototype),h(s.prototype,"rowLeft",[a.action],Object.getOwnPropertyDescriptor(s.prototype,"rowLeft"),s.prototype),s);(0,t.setComponentTemplate)(g,y)}),define("kell/components/debug-tools",["exports","@ember/component","@glimmer/component","@ember/service","@glimmer/tracking","@ember/object","@ember/template-factory"],function(e,t,r,n,i,a,o){var l,s
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const u=(0,o.createTemplateFactory)({id:"Z1YtUDat",block:'[[[1,"\\t"],[11,"button"],[24,0,"btn btn-primary btn-sm"],[24,4,"button"],[4,[38,1],["click",[30,0,["data","clearMutations"]]],null],[12],[1,"Clear table"],[13],[1,"\\n\\t"],[11,"button"],[24,0,"btn btn-primary btn-sm"],[24,4,"button"],[4,[38,1],["click",[30,0,["data","copyAllMutationsToClipboard"]]],null],[12],[1,"Copy all variants to clipboard"],[13]],[],["button","on"]]',moduleName:"kell/components/debug-tools.hbs",isStrictMode:!1})
let c=e.default=(l=class extends r.default{constructor(...e){var t,r,n,i
super(...e),t=this,r="data",i=this,(n=s)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}},d=l.prototype,p="data",b=[n.service],f={configurable:!0,enumerable:!0,writable:!0,initializer:null},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=b.slice().reverse().reduce(function(e,t){return t(d,p,e)||e},h),m&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(m):void 0,h.initializer=void 0),s=void 0===h.initializer?(Object.defineProperty(d,p,h),null):h,l)
var d,p,b,f,m,h;(0,t.setComponentTemplate)(u,c)}),define("kell/components/molstar-viewer",["exports","@ember/component","@glimmer/component","@ember/object","@glimmer/tracking","@ember/string","@ember/service","molstar/lib/mol-plugin-ui/spec","molstar/lib/mol-plugin-ui","molstar/lib/mol-plugin-ui/react18","molstar/lib/mol-plugin/config","molstar/lib/mol-model/structure","molstar/lib/mol-script/language/builder","molstar/lib/mol-script/language/expression","molstar/lib/mol-plugin-state/helpers/structure-selection-query","molstar/lib/mol-script/script","molstar/lib/mol-model/structure/query","molstar/lib/mol-plugin-state/helpers/structure-overpaint","molstar/lib/mol-util/color","molstar/lib/mol-model/loci","molstar/lib/mol-model/structure/structure/element/schema","molstar/lib/mol-util/color/names","molstar/lib/mol-plugin/commands","molstar/lib/mol-plugin/behavior/dynamic/selection/structure-focus-representation","@ember/template-factory"],function(e,t,r,n,i,a,o,l,s,u,c,d,p,b,f,m,h,g,y,v,P,k,O,j,S){var x,w,M
function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var n=r.call(e,t||"default")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const D=(0,S.createTemplateFactory)({id:"+M+FgS94",block:'[[[11,0],[17,1],[24,1,"molstar-parent"],[24,0,"molstar-viewer position-relative w-100"],[4,[30,0,["setup"]],null,null],[4,[38,1],[[30,0,["handleResize"]]],null],[4,[30,0,["setHover"]],[[30,0,["data","hoveredResidue"]]],null],[4,[30,0,["setSelection"]],[[30,0,["data","selectedResidue"]]],null],[12],[1,"\\n"],[13],[1,"\\n"],[1,[30,0,["hoverSurroundings"]]]],["&attrs"],["div","on-resize"]]',moduleName:"kell/components/molstar-viewer.hbs",isStrictMode:!1})
let V=e.default=(x=class extends r.default{constructor(...e){super(...e),C(this,"data",w,this),_(this,"domains",[{name:"membrane-proximal",ranges:[[68,137],[420,491],[529,732]]},{name:"membrane-distal",ranges:[[138,419],[492,528]]},{name:"transmembrane",ranges:[[44,67]]},{name:"intracellular",ranges:[[1,43]]}]),_(this,"domainColors",{membraneProximal:16777215,membraneDistal:8947848,transmembrane:15787660,intracellular:6737322}),_(this,"backgroundColor",k.ColorNames.black),_(this,"highlightColor",k.ColorNames.green),_(this,"selectColor",k.ColorNames.red),_(this,"focusExpandRadius",7),C(this,"mstar",M,this),_(this,"setupCalled",!1),_(this,"MySpec",{...(0,l.DefaultPluginUISpec)(),config:[[c.PluginConfig.VolumeStreaming.Enabled,!1]],layout:{initial:{isExpanded:!1,showControls:!1}}})}get structure(){return this.mstar?.managers.structure.hierarchy.current.structures[0].cell.obj.data}get components(){return this.mstar?.managers.structure.hierarchy.current.structures[0].components}handleResize({contentRect:{width:e,height:t},target:r}){const n=Math.round(e/(16/9))
t!=n&&(r.style.height=n+"px")}async setup(){if(this.setupCalled)return
this.setupCalled=!0,console.log("setup"),console.log(this.MySpec)
const e=await this.createPlugin(document.getElementById("molstar-parent"))
e.behaviors.interaction.hover.subscribe(t=>{const r=v.Loci.normalize(t.current.loci,e.managers.interactivity.props.granularity)
"element-loci"==r.kind?d.Structure.eachAtomicHierarchyElement(d.StructureElement.Loci.toStructure(r),{residue:e=>{const t=d.StructureProperties.residue.label_seq_id(e),r=d.StructureProperties.chain.label_asym_id(e)
t&&r&&this.data.setHoveredResidue(t,r)}}):this.data.hoveredResidue&&this.data.clearHoveredResidue()}),e.behaviors.interaction.click.subscribe(t=>{console.log("click",t)
const r=e.managers.structure.focus.current
r?(console.log(r.loci),d.Structure.eachAtomicHierarchyElement(d.StructureElement.Loci.toStructure(r.loci),{residue:e=>{const t=d.StructureProperties.residue.label_seq_id(e),r=d.StructureProperties.chain.label_asym_id(e)
if(t&&r){this.data.manuallySelectedResidue={position:t,chain:r}
const e=this.getSurroundings(t,r)
console.log(e),this.data.surroundings=e}}})):(this.data.manuallySelectedResidue=null,this.data.surroundings=[])}),e.state.updateBehavior(j.StructureFocusRepresentation,e=>{console.log(j.StructureFocusRepresentation),e.expandRadius=this.focusExpandRadius}),this.mstar=e,this.applyColors()}async createPlugin(e){const t=await(0,s.createPluginUI)({target:e,spec:this.MySpec,render:u.renderReact18})
console.log("props",t.canvas3d.props)
const r={...t.canvas3d.props.renderer,backgroundColor:this.backgroundColor,highlightColor:this.highlightColor,selectColor:this.selectColor},n={...t.canvas3d.props.marking,highlightEdgeColor:this.highlightColor,selectEdgeColor:this.selectColor}
O.PluginCommands.Canvas3D.SetSettings(t,{settings:{renderer:r,marking:n}})
const i=await t.builders.data.download({url:"assets/Kell_Zn_AF3.rot.z.180.pdb"},{state:{isGhost:!0}}),a=await t.builders.structure.parseTrajectory(i,"pdb")
return await t.builders.structure.hierarchy.applyPreset(a,"default"),t}async applyColors(){for(let{name:e,ranges:t}of this.domains){const r=this.getSelectionExpression(t,"A"),n=d.StructureElement.Loci.fromExpression(this.structure,r),i=(0,y.Color)(this.domainColors[(0,a.camelize)(e)])
await(0,g.setStructureOverpaint)(this.mstar,this.components,i,()=>n)}}async paintSurroundings(e){await(0,g.setStructureOverpaint)(this.mstar,this.components,16711935,()=>e)}setSelection(e,t){this.mstar&&(t?this.selectPosition(t.position,t.chain):this.mstar.managers.interactivity.lociSelects.deselectAll())}setHover(e,t){if(this.mstar)if(t){const e=this.getLociFromPosition(t.position,t.chain)
this.mstar.managers.interactivity.lociHighlights.highlightOnly({loci:e})}else this.mstar.managers.interactivity.lociHighlights.clearHighlights()}get hoverSurroundings(){return this.data.hoverPosition,""}getSurroundings(e,t="A"){console.log("focus")
const r=p.MolScriptBuilder.struct.generator.atomGroups({"chain-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.auth_asym_id(),t]),"residue-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.label_seq_id(),e])})
let n=p.MolScriptBuilder.struct.modifier.includeSurroundings({0:r,radius:this.focusExpandRadius,"as-whole-residues":!0})
n=p.MolScriptBuilder.struct.modifier.exceptBy({0:n,by:r}),console.log(n)
const i=d.StructureElement.Loci.fromExpression(this.structure,n)
console.log(i)
const a=[]
return d.Structure.eachAtomicHierarchyElement(d.StructureElement.Loci.toStructure(i),{residue:e=>{const t=d.StructureProperties.residue.label_seq_id(e)
"A"==d.StructureProperties.chain.label_asym_id(e)&&a.push(t)}}),a}focus(e,t="A"){console.log("focus")
const r=p.MolScriptBuilder.struct.generator.atomGroups({"chain-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.auth_asym_id(),t]),"residue-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.label_seq_id(),e])}),n=p.MolScriptBuilder.struct.modifier.includeSurroundings({0:r,radius:5,"as-whole-residues":!0})
console.log(n)
const i=d.StructureElement.Loci.fromExpression(this.structure,n)
console.log(i)
const a=[]
d.Structure.eachAtomicHierarchyElement(v.Loci.toStructure(i),{chain:e=>{console.log("chain",e)},residue:e=>{console.log("residue",e)
const t=d.StructureProperties.residue.label_seq_id(e)
a.push(t)},atom:e=>{console.log("residue",e)}}),console.log(a)}boo(e){const t=this.mstar.helpers.substructureParent.get(e.structure)
if(!t||!t.obj)return
const r=d.StructureElement.Loci.remap(e,t.obj.data),n=d.StructureElement.Loci.extendToWholeResidues(r),i=d.StructureElement.Bundle.fromLoci(n),a=d.StructureElement.Bundle.toExpression(i)
let o=p.MolScriptBuilder.struct.modifier.includeSurroundings({0:a,radius:5,"as-whole-residues":!0})
return console.log(o),o}getLociFromPosition(e,t="A"){const r=p.MolScriptBuilder.struct.generator.atomGroups({"chain-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.auth_asym_id(),t]),"residue-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.label_seq_id(),e])})
return d.StructureElement.Loci.fromExpression(this.structure,r)}getSelectionExpression(e,t="A"){const r=[]
for(let n of e)r.push(p.MolScriptBuilder.struct.generator.atomGroups({"chain-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.auth_asym_id(),t]),"residue-test":p.MolScriptBuilder.core.rel.inRange([p.MolScriptBuilder.struct.atomProperty.macromolecular.label_seq_id(),n[0],n[1]])}))
return p.MolScriptBuilder.struct.combinator.merge(r.map(e=>p.MolScriptBuilder.struct.modifier.union([e])))}selectVariant(e){this.selectPosition(parseInt(e.slice(1,-1)))}selectPosition(e,t="A"){const r=p.MolScriptBuilder.struct.generator.atomGroups({"chain-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.auth_asym_id(),t]),"residue-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.label_seq_id(),e])})
var n=(0,f.StructureSelectionQuery)("pos-"+e,r)
this.mstar.managers.structure.selection.fromSelectionQuery("set",n)}async select_multiple(){const e=[["A",0,30],["A",100,150]],t=[]
for(var r of e)t.push(p.MolScriptBuilder.struct.generator.atomGroups({"chain-test":p.MolScriptBuilder.core.rel.eq([p.MolScriptBuilder.struct.atomProperty.macromolecular.auth_asym_id(),r[0]]),"residue-test":p.MolScriptBuilder.core.rel.inRange([p.MolScriptBuilder.struct.atomProperty.macromolecular.label_seq_id(),r[1],r[2]])}))
p.MolScriptBuilder.struct.combinator.merge(t.map(e=>p.MolScriptBuilder.struct.modifier.union([e])))
var n=(0,f.StructureSelectionQuery)("someresidues",p.MolScriptBuilder.struct.combinator.merge(t))
console.log("sq",n),this.mstar.managers.structure.selection.fromSelectionQuery("set",n)}},w=z(x.prototype,"data",[o.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=z(x.prototype,"mstar",[i.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z(x.prototype,"handleResize",[n.action],Object.getOwnPropertyDescriptor(x.prototype,"handleResize"),x.prototype),z(x.prototype,"setup",[n.action],Object.getOwnPropertyDescriptor(x.prototype,"setup"),x.prototype),z(x.prototype,"setSelection",[n.action],Object.getOwnPropertyDescriptor(x.prototype,"setSelection"),x.prototype),z(x.prototype,"setHover",[n.action],Object.getOwnPropertyDescriptor(x.prototype,"setHover"),x.prototype),x);(0,t.setComponentTemplate)(D,V)}),define("kell/components/pagination",["exports","@ember/component","@glimmer/component","@ember/service","@glimmer/tracking","@ember/object","@ember/template-factory"],function(e,t,r,n,i,a,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,o.createTemplateFactory)({id:"l0RkYvUN",block:'[[[11,"nav"],[17,1],[24,0,"pagination"],[24,"aria-label","Page navigation example"],[12],[1,"\\n  "],[10,"ul"],[14,0,"pagination pagination-sm"],[12],[1,"\\n    "],[11,"li"],[16,0,[29,["page-item ",[52,[30,0,["isFirstPage"]],"disabled"]]]],[4,[38,4],["click",[28,[37,5],[[30,2],[28,[37,6],[[30,3],1],null]],null]],null],[12],[1,"\\n      "],[10,3],[14,0,"page-link"],[14,6,"#"],[14,"aria-label","Previous"],[12],[1,"\\n        "],[10,1],[14,"aria-hidden","true"],[12],[1,"‹"],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n"],[42,[28,[37,10],[[28,[37,10],[[30,0,["indices"]]],null]],null],null,[[[41,[28,[37,11],[[30,4,["idx"]],"ellipsis"],null],[[[1,"\\t    \\t"],[10,"li"],[14,0,"page-item"],[12],[1,"\\n\\t    \\t  "],[10,3],[14,0,"page-link"],[14,"aria-label","ellipsis"],[12],[1,"\\n\\t    \\t    "],[10,1],[14,"aria-hidden","true"],[12],[1,"…"],[13],[1,"\\n\\t    \\t  "],[13],[1,"\\n\\t    \\t"],[13],[1,"\\n"]],[]],[[[1,"    \\t\\t"],[11,"li"],[16,0,[29,["page-item ",[52,[30,4,["active"]],"active"]]]],[4,[38,4],["click",[28,[37,5],[[30,2],[30,4,["idx"]]],null]],null],[12],[10,3],[14,0,"page-link"],[14,6,"#"],[12],[1,[28,[35,12],[[30,4,["idx"]],1],null]],[13],[13],[1,"\\n"]],[]]]],[4]],null],[1,"    "],[11,"li"],[16,0,[29,["page-item ",[52,[30,0,["isLastPage"]],"disabled"]]]],[4,[38,4],["click",[28,[37,5],[[30,2],[28,[37,12],[[30,3],1],null]],null]],null],[12],[1,"\\n      "],[10,3],[14,0,"page-link"],[14,6,"#"],[14,"aria-label","Next"],[12],[1,"\\n        "],[10,1],[14,"aria-hidden","true"],[12],[1,"›"],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["&attrs","@setPageIndex","@pageIndex","idx"],["nav","ul","li","if","on","fn","sub","a","span","each","-track-array","eq","sum"]]',moduleName:"kell/components/pagination.hbs",isStrictMode:!1})
class s extends r.default{get isFirstPage(){return 0==this.args.pageIndex||0==this.args.pageCount}get isLastPage(){return this.args.pageIndex==this.args.pageCount-1||0==this.args.pageCount}get indices(){let e
if(0==this.args.pageCount)e=[]
else if(this.args.pageCount<=7)e=Array(this.args.pageCount).fill().map((e,t)=>t)
else{const t=0,r=this.args.pageCount-1
this.args.pageIndex<4?(e=Array(5).fill().map((e,t)=>t),e.push("ellipsis"),e.push(r)):r-this.args.pageIndex<4?(e=Array(5).fill().map((e,t)=>r+t-4),e.unshift("ellipsis"),e.unshift(t)):(e=Array(3).fill().map((e,t)=>this.args.pageIndex-1+t),e.unshift("ellipsis"),e.unshift(t),e.push("ellipsis"),e.push(r))}return e.map(e=>({idx:e,active:e==this.args.pageIndex}))}}e.default=s,(0,t.setComponentTemplate)(l,s)}),define("kell/components/sequence-acid",["exports","@ember/component","@glimmer/component","bootstrap","@ember/service","@glimmer/tracking","@ember/object","@ember/template-factory"],function(e,t,r,n,i,a,o,l){var s,u
function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var n=r.call(e,t||"default")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const p=(0,l.createTemplateFactory)({id:"9CE5ozGF",block:'[[[11,0],[17,1],[16,0,[29,["sequence-acid acid-element ",[52,[28,[30,0,["data","anyMutationActive"]],[[30,2]],null],"act"]]]],[24,"data-bs-toggle","tooltip"],[24,"data-bs-placement","top"],[16,"data-bs-title",[28,[37,2],[[30,2],1],null]],[4,[30,0,["initTooltip"]],null,null],[12],[1,"\\n\\t"],[11,"button"],[16,0,[29,["btn btn-sm sequence-acid-button font-monospace ",[52,[30,0,["showSelector"]],"active"]," ",[52,[28,[30,0,["data","anyMutationActive"]],[[30,2]],null],"color-primary"]," ",[52,[30,0,["hovered"]],"hovered"]," ",[52,[30,0,["selected"]],"selected"]," ",[52,[30,0,["isSurrounding"]],"surrounding"]]]],[24,"data-bs-toggle","button"],[24,4,"button"],[4,[38,4],["click",[30,0,["acidClicked"]]],null],[4,[38,4],["mouseenter",[30,0,["mouseEnter"]]],null],[4,[38,4],["mouseleave",[30,0,["mouseLeave"]]],null],[12],[1,[30,3]],[13],[1,"\\n\\t"],[41,[30,0,["showSelector"]],[[[8,[39,5],[[4,[38,6],[[30,0,["acidClicked"]]],null]],[["@mutationActive","@pos","@ref"],[[28,[30,0,["data","anyMutationActive"]],[[30,2]],null],[30,0,["pos"]],[30,3]]],null]],[]],null],[1,"\\n"],[42,[28,[37,8],[[28,[37,8],[[28,[30,0,["data","getColorsAtSeqIdx"]],[[30,2]],null]],null]],null],null,[[[1,"\\t\\t"],[10,0],[15,0,[29,["color-badge idx-",[30,5]," ",[30,4]]]],[12],[1,"\\n\\t\\t  "],[10,1],[14,0,"visually-hidden"],[12],[13],[1,"\\n\\t\\t"],[13],[1,"\\n"]],[4,5]],null],[13]],["&attrs","@idx","@aminoAcid","color","index"],["div","if","sum","button","on","variant-selector","on-outside-click","each","-track-array","span"]]',moduleName:"kell/components/sequence-acid.hbs",isStrictMode:!1})
let b=e.default=(s=class extends r.default{constructor(...e){var t,r,n,i
super(...e),c(this,"tooltip",null),t=this,r="data",i=this,(n=u)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}initTooltip(e){}get showSelector(){return this.args.currentIndex==this.args.idx}get pos(){return this.args.idx+1}get hovered(){return this.data.hoveredResidue&&"A"==this.data.hoveredResidue.chain&&this.data.hoveredResidue.position==this.pos}get selected(){return this.data.selectedResidue&&"A"==this.data.selectedResidue.chain&&this.data.selectedResidue.position==this.pos}get isSurrounding(){return this.data.surroundings.indexOf(this.pos)>-1}mouseEnter(e){this.data.setHoveredResidue(this.pos)}mouseLeave(e){this.data.clearHoveredResidue()}acidClicked(e){e.stopPropagation(),console.log(this.args.idx+" clicked "+this.args.aminoAcid),this.showSelector?this.args.setCurrentIndex(-1):this.args.setCurrentIndex(this.args.idx)}},u=d(s.prototype,"data",[i.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d(s.prototype,"initTooltip",[o.action],Object.getOwnPropertyDescriptor(s.prototype,"initTooltip"),s.prototype),d(s.prototype,"mouseEnter",[o.action],Object.getOwnPropertyDescriptor(s.prototype,"mouseEnter"),s.prototype),d(s.prototype,"mouseLeave",[o.action],Object.getOwnPropertyDescriptor(s.prototype,"mouseLeave"),s.prototype),d(s.prototype,"acidClicked",[o.action],Object.getOwnPropertyDescriptor(s.prototype,"acidClicked"),s.prototype),s);(0,t.setComponentTemplate)(p,b)}),define("kell/components/sequence-view",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","ember-math-helpers/helpers/sum","ember-math-helpers/helpers/mult","@ember/service","@ember/template-factory"],function(e,t,r,n,i,a,o,l,s){var u,c,d
function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const f=(0,s.createTemplateFactory)({id:"rfusvFoR",block:'[[[11,0],[17,1],[24,0,"sequence-view my-3"],[12],[1,"\\n\\t"],[10,0],[14,0,"px-4"],[12],[1,"\\n\\t\\t"],[10,0],[14,0,"sequence-container noselect"],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,0,["data","chunkedSequence"]]],null]],null],null,[[[1,"\\t\\t\\t\\t"],[11,0],[24,0,"chunk-block"],[4,[38,3],null,null],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,2]],null]],null],null,[[[44,[[28,[37,5],[[28,[37,6],[[30,3],[30,0,["data","sequenceChunkSize"]]],null],[30,5]],null]],[[[1,"\\t\\t\\t\\t\\t\\t\\t"],[8,[39,7],null,[["@currentIndex","@setCurrentIndex","@aminoAcid","@idx"],[[30,0,["currentIndex"]],[30,0,["setCurrentIndex"]],[30,4],[30,6]]],null],[1,"\\n"]],[6]]]],[4,5]],null],[41,[28,[37,9],[[30,2,["length"]],[30,0,["data","sequenceChunkSize"]]],null],[[[1,"\\t\\t\\t\\t\\t\\t"],[10,0],[14,0,"chunk-label right"],[12],[1,"\\n\\t\\t\\t\\t\\t\\t\\t"],[10,2],[12],[10,"small"],[12],[1,[28,[35,6],[[28,[37,5],[[30,3],1],null],[30,0,["data","sequenceChunkSize"]]],null]],[13],[13],[1,"\\n\\t\\t\\t\\t\\t\\t"],[13],[1,"\\n"]],[]],null],[1,"\\t\\t\\t\\t\\t"],[10,0],[14,0,"chunk-label left"],[12],[1,"\\n\\t\\t\\t\\t\\t\\t"],[10,2],[12],[10,"small"],[12],[1,[28,[35,6],[[30,3],[30,0,["data","sequenceChunkSize"]]],null]],[13],[13],[1,"\\n\\t\\t\\t\\t\\t"],[13],[1,"\\n"],[41,[28,[37,12],[[30,2,["length"]],[30,0,["data","sequenceChunkSize"]]],null],[[[42,[28,[37,2],[[28,[37,2],[[28,[37,13],[[28,[37,14],[[30,0,["data","sequenceChunkSize"]],[30,2,["length"]]],null]],null]],null]],null],null,[[[1,"\\t\\t\\t\\t\\t\\t\\t"],[10,0],[14,0,"dummy"],[12],[13],[1,"\\n"]],[]],null]],[]],null],[1,"\\t\\t\\t\\t"],[13],[1,"\\n"]],[2,3]],null],[1,"\\t\\t"],[13],[1,"\\n\\t"],[13],[1,"\\n"],[13]],["&attrs","chunk","chunkIdx","acid","acidIdx","idx"],["div","each","-track-array","is-first-column","let","sum","mult","sequence-acid","if","eq","p","small","lt","number-to-array","sub"]]',moduleName:"kell/components/sequence-view.hbs",isStrictMode:!1})
let m=e.default=(u=class extends r.default{constructor(...e){super(...e),p(this,"data",c,this),p(this,"currentIndex",d,this)}setCurrentIndex(e){this.currentIndex=e}},c=b(u.prototype,"data",[l.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=b(u.prototype,"currentIndex",[n.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b(u.prototype,"setCurrentIndex",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"setCurrentIndex"),u.prototype),u);(0,t.setComponentTemplate)(f,m)}),define("kell/components/sort-button",["exports","@ember/component","@glimmer/component","@ember/service","@glimmer/tracking","@ember/object","@ember/template-factory"],function(e,t,r,n,i,a,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,o.createTemplateFactory)({id:"q13gNqcX",block:'[[[11,1],[17,1],[16,0,[29,["sort-button ",[52,[51,[30,0,["activeColumn"]]],"text-body-tertiary"]]]],[12],[1,"\\n"],[41,[28,[37,3],[[30,2],[30,0,["activeColumn"]]],null],[[[1,"\\t\\t"],[10,"i"],[14,0,"bi bi-sort-down"],[12],[13],[1,"\\n"]],[]],[[[1,"\\t\\t"],[10,"i"],[14,0,"bi bi-sort-up"],[12],[13],[1,"\\n"]],[]]],[13]],["&attrs","@sortDescending"],["span","unless","if","and","i"]]',moduleName:"kell/components/sort-button.hbs",isStrictMode:!1})
class s extends r.default{get activeColumn(){return this.args.sortColumn==this.args.column}}e.default=s,(0,t.setComponentTemplate)(l,s)}),define("kell/components/star-rating",["exports","@ember/component","@glimmer/component","@ember/service","@glimmer/tracking","@ember/object","@ember/template-factory"],function(e,t,r,n,i,a,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,o.createTemplateFactory)({id:"Rtaflebm",block:'[[[11,0],[17,1],[16,0,[29,["star-rating ",[30,0,["color"]]]]],[12],[1,"\\n\\t"],[10,2],[12],[1,"\\n\\t\\t"],[10,1],[15,0,[29,["d-flex ",[52,[30,2],"gap"]," align-items-end"]]],[12],[1,"\\n"],[42,[28,[37,5],[[28,[37,5],[[28,[30,0,["numberToArray"]],[[30,0,["filledStarCount"]]],null]],null]],null],null,[[[1,"\\t\\t\\t\\t"],[10,"i"],[15,0,[29,["bi ",[30,0,["ratingIcon","filled"]]]]],[12],[13],[1,"\\n"]],[3]],null],[42,[28,[37,5],[[28,[37,5],[[28,[30,0,["numberToArray"]],[[30,0,["blankStarCount"]]],null]],null]],null],null,[[[1,"\\t\\t\\t\\t"],[10,"i"],[15,0,[29,["bi ",[30,0,["ratingIcon","blank"]]]]],[12],[13],[1,"\\n"]],[4]],null],[1,"\\t\\t"],[13],[1,"\\n\\t"],[13],[1,"\\n"],[13]],["&attrs","@ratingIconGap","x","x"],["div","p","span","if","each","-track-array","i"]]',moduleName:"kell/components/star-rating.hbs",isStrictMode:!1})
class s extends r.default{get filledStarCount(){return this.args.score}get blankStarCount(){return 5-this.filledStarCount}get color(){return this.args.fixed?"green":"red"}numberToArray(e){return new Array(e)}get ratingIcon(){switch(this.args.ratingIcon){case"square":return{blank:"bi-square",filled:"bi-square-fill"}
case"sun":return{blank:"bi-sun",filled:"bi-sun-fill"}
case"bulb":return{blank:"bi-lightbulb",filled:"bi-lightbulb-fill"}
case"star":return{blank:"bi-star",filled:"bi-star-fill"}
case"record":return{blank:"bi-circle",filled:"bi-record-circle"}
default:return{blank:"bi-circle",filled:"bi-circle-fill"}}}}e.default=s,(0,t.setComponentTemplate)(l,s)}),define("kell/components/theme-switch",["exports","@ember/component","@glimmer/component","@ember/service","@glimmer/tracking","@ember/object","@ember/template-factory"],function(e,t,r,n,i,a,o){var l,s
function u(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const c=(0,o.createTemplateFactory)({id:"UaqGRUqN",block:'[[[11,0],[17,1],[24,0,"theme-switch"],[12],[1,"\\n\\t"],[11,"input"],[24,0,"checkbox"],[24,1,"chk"],[24,4,"checkbox"],[4,[30,0,["setChecked"]],[[28,[37,2],[[30,0,["theme","currentTheme"]],"dark"],null]],null],[4,[38,3],["change",[30,0,["toggleTheme"]]],null],[12],[13],[1,"\\n\\t"],[10,"label"],[14,0,"label"],[14,"for","chk"],[12],[1,"\\n\\t\\t"],[10,"i"],[14,0,"bi bi-moon-fill"],[12],[13],[1,"\\n\\t\\t"],[10,"i"],[14,0,"bi bi-sun-fill"],[12],[13],[1,"\\n\\t\\t"],[10,0],[14,0,"ball"],[12],[13],[1,"\\n\\t"],[13],[1,"\\n"],[13]],["&attrs"],["div","input","eq","on","label","i"]]',moduleName:"kell/components/theme-switch.hbs",isStrictMode:!1})
let d=e.default=(l=class extends r.default{constructor(...e){var t,r,n,i
super(...e),t=this,r="theme",i=this,(n=s)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}toggleTheme(e){e.target.checked?this.theme.setDarkTheme():this.theme.setLightTheme()}setChecked(e,t){e.checked=!!t}},s=u(l.prototype,"theme",[n.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u(l.prototype,"toggleTheme",[a.action],Object.getOwnPropertyDescriptor(l.prototype,"toggleTheme"),l.prototype),u(l.prototype,"setChecked",[a.action],Object.getOwnPropertyDescriptor(l.prototype,"setChecked"),l.prototype),l);(0,t.setComponentTemplate)(c,d)}),define("kell/components/variant-info",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","@ember/runloop","@ember/template-factory"],function(e,t,r,n,i,a,o,l){var s,u,c,d
function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const f=(0,l.createTemplateFactory)({id:"rZ+lN9u6",block:'[[[11,0],[24,0,"variant-info my-3"],[4,[30,0,["checkSelectedVariant"]],[[30,0,["tableData","selectedVariantInTable"]]],null],[12],[1,"\\n"],[41,[30,0,["data","variantTexts"]],[[[1,"\\t\\t"],[10,0],[14,0,"card"],[12],[1,"\\n\\t\\t  "],[10,0],[14,0,"card-header text-center position-relative"],[12],[1,"\\n\\t\\t    "],[1,[30,0,["data","variantTexts","variant"]]],[1,"\\n\\t\\t    \\t"],[11,"button"],[16,0,[29,["btn btn-",[30,0,["theme","currentTheme"]]," card-header-button left"]]],[24,4,"button"],[4,[38,3],[[28,[37,4],[[30,0,["previousVariant"]]],null]],null],[4,[38,5],["click",[30,0,["gotoPreviousVariant"]]],null],[12],[1,"‹"],[13],[1,"\\n\\t\\t    \\t"],[11,"button"],[16,0,[29,["btn btn-",[30,0,["theme","currentTheme"]]," card-header-button right"]]],[24,4,"button"],[4,[38,3],[[28,[37,4],[[30,0,["nextVariant"]]],null]],null],[4,[38,5],["click",[30,0,["gotoNextVariant"]]],null],[12],[1,"›"],[13],[1,"\\n\\t\\t  "],[13],[1,"\\n\\t\\t  "],[10,0],[14,0,"d-flex"],[12],[1,"\\n\\t\\t\\t  "],[10,0],[14,0,"card-body flex-basis-100"],[12],[1,"\\n\\t\\t\\t    "],[10,"h5"],[14,0,"card-title"],[12],[1,"Destabilizing"],[13],[1,"\\n\\t\\t\\t    "],[10,2],[14,0,"card-text"],[12],[1,[28,[35,8],[[30,0,["data","variantTexts","destabMessage"]]],null]],[13],[1,"\\n\\t\\t\\t  "],[13],[1,"\\n\\t\\t\\t  "],[10,0],[14,0,"card-body flex-basis-100"],[12],[1,"\\n\\t\\t\\t    "],[10,"h5"],[14,0,"card-title"],[12],[1,"Antigenicity"],[13],[1,"\\n\\t\\t\\t    "],[10,2],[14,0,"card-text"],[12],[1,[28,[35,8],[[30,0,["data","variantTexts","agMessage"]]],null]],[13],[1,"\\n\\t\\t\\t  "],[13],[1,"\\n\\t\\t\\t"],[13],[1,"\\n\\t\\t"],[13],[1,"\\n"]],[]],null],[13]],[],["div","if","button","set-disabled","not","on","h5","p","replace-pipe"]]',moduleName:"kell/components/variant-info.hbs",isStrictMode:!1})
let m=e.default=(s=class extends r.default{constructor(...e){super(...e),p(this,"data",u,this),p(this,"tableData",c,this),p(this,"theme",d,this)}get nextVariant(){return this.tableData.getNextVariant(this.data.selectedVariant)}get previousVariant(){return this.tableData.getPreviousVariant(this.data.selectedVariant)}gotoNextVariant(){this.nextVariant&&this.tableData.setSelectedVariant(this.nextVariant)}gotoPreviousVariant(){this.previousVariant&&this.tableData.setSelectedVariant(this.previousVariant)}checkSelectedVariant(e,t){console.log(t),!t&&this.data.selectedVariant&&(0,o.next)(this,()=>this.data.selectedVariant=null)}},u=b(s.prototype,"data",[a.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=b(s.prototype,"tableData",[a.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=b(s.prototype,"theme",[a.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b(s.prototype,"gotoNextVariant",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"gotoNextVariant"),s.prototype),b(s.prototype,"gotoPreviousVariant",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"gotoPreviousVariant"),s.prototype),b(s.prototype,"checkSelectedVariant",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"checkSelectedVariant"),s.prototype),s);(0,t.setComponentTemplate)(f,m)}),define("kell/components/variant-input-modal",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","ember-truth-helpers","@ember/template-factory"],function(e,t,r,n,i,a,o){var l,s
function u(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const c=(0,o.createTemplateFactory)({id:"ABZz7HjT",block:'[[[11,0],[17,1],[24,0,"modal modal-lg fade"],[24,1,"parseResults"],[24,"data-bs-backdrop","static"],[24,"data-bs-keyboard","false"],[24,"tabindex","-1"],[24,"aria-labelledby","parseResultsLabel"],[24,"aria-hidden","true"],[4,[38,1],["show.bs.modal",[30,0,["uncheckClear"]]],null],[12],[1,"\\n  "],[10,0],[14,0,"modal-dialog modal-dialog-scrollable modal-dialog-centered"],[12],[1,"\\n    "],[10,0],[14,0,"modal-content"],[12],[1,"\\n      "],[10,0],[14,0,"modal-header"],[12],[1,"\\n        "],[10,"h1"],[14,0,"modal-title fs-5"],[14,1,"parseResultsLabel"],[12],[1,"Parse Result"],[13],[1,"\\n        "],[11,"button"],[24,0,"btn-close"],[24,"data-bs-dismiss","modal"],[24,"aria-label","Close"],[24,4,"button"],[4,[38,1],["click",[30,2]],null],[12],[13],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"modal-body"],[12],[1,"\\n"],[41,[28,[37,5],[[30,0,["validVariantCount"]],0],null],[[[1,"          "],[10,0],[14,0,"bd-callout bd-callout-success"],[12],[1,"\\n      \\t\\t  "],[10,"h5"],[12],[1,[30,0,["validVariantCount"]]],[1," valid variant"],[1,[52,[28,[37,5],[[30,0,["validVariantCount"]],1],null],"s"]],[1," found:"],[13],[1,"\\n            "],[10,2],[12],[1,"\\n              "],[1,[28,[30,0,["joinVariants"]],[[30,3,["validVariants"]]],null]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[1,"          "],[10,0],[14,0,"bd-callout bd-callout-danger"],[12],[1,"\\n            "],[10,"h5"],[12],[1,"No valid variants were found."],[13],[1,"\\n          "],[13],[1,"\\n"]],[]]],[41,[28,[37,5],[[30,0,["invalidVariantCount"]],0],null],[[[1,"          "],[10,0],[14,0,"bd-callout bd-callout-warning"],[12],[1,"\\n            "],[10,"h5"],[12],[1,[30,0,["invalidVariantCount"]]],[1," variant"],[1,[52,[28,[37,5],[[30,0,["invalidVariantCount"]],1],null],"s were"," was"]],[1," rejected:"],[13],[1,"\\n"],[41,[28,[37,5],[[30,3,["outOfBounds","length"]],0],null],[[[1,"              "],[10,2],[12],[1,"\\n                "],[10,"strong"],[12],[1,"Out of bounds: "],[13],[10,"br"],[12],[13],[1,"\\n                "],[1,[28,[30,0,["joinVariants"]],[[30,3,["outOfBounds"]]],null]],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[41,[28,[37,5],[[30,3,["referenceMismatch","length"]],0],null],[[[1,"              "],[10,2],[12],[1,"\\n                "],[10,"strong"],[12],[1,"Reference mismatch: "],[13],[10,"br"],[12],[13],[1,"\\n                "],[1,[28,[30,0,["joinVariants"]],[[30,3,["referenceMismatch"]]],null]],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[41,[28,[37,5],[[30,3,["wildType","length"]],0],null],[[[1,"              "],[10,2],[12],[1,"\\n                "],[10,"strong"],[12],[1,"Alternative equals reference: "],[13],[10,"br"],[12],[13],[1,"\\n                "],[1,[28,[30,0,["joinVariants"]],[[30,3,["wildType"]]],null]],[1,"\\n              "],[13],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n      "],[10,0],[14,0,"modal-footer"],[12],[1,"\\n        "],[11,"button"],[24,0,"btn btn-secondary btn-sm"],[24,"data-bs-dismiss","modal"],[24,4,"button"],[4,[38,1],["click",[30,2]],null],[12],[1,"Cancel"],[13],[1,"\\n        "],[10,0],[14,0,"form-check"],[12],[1,"\\n          "],[11,"input"],[24,0,"form-check-input"],[24,2,""],[24,1,"clearCheck"],[24,4,"checkbox"],[4,[30,0,["setDisabled"]],[[28,[37,11],[[30,0,["validVariantCount"]],0],null]],null],[4,[38,1],["change",[30,0,["clearCheckChanged"]]],null],[12],[13],[1,"\\n          "],[10,"label"],[14,0,"form-check-label"],[14,"for","clearCheck"],[12],[1,"\\n            Clear table beforehand\\n          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[11,"button"],[24,0,"btn btn-primary btn-sm"],[24,"data-bs-dismiss","modal"],[24,4,"button"],[4,[30,0,["setDisabled"]],[[28,[37,11],[[30,0,["validVariantCount"]],0],null]],null],[4,[38,1],["click",[28,[37,13],[[30,4],[30,0,["clearChecked"]]],null]],null],[12],[1,"Add "],[1,[52,[28,[37,5],[[30,0,["validVariantCount"]],0],null],[28,[37,14],[[30,0,["validVariantCount"]]," "],null]]],[1,"variant"],[1,[52,[28,[37,15],[[30,0,["validVariantCount"]],1],null],"s"]],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13]],["&attrs","@onCancel","@checkResults","@onOk"],["div","on","h1","button","if","gt","h5","p","strong","br","input","eq","label","fn","concat","not-eq"]]',moduleName:"kell/components/variant-input-modal.hbs",isStrictMode:!1})
let d=e.default=(l=class extends r.default{constructor(...e){var t,r,n,i
super(...e),t=this,r="clearChecked",i=this,(n=s)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}joinVariants(e){return e.join(", ")}get validVariantCount(){return this.args.checkResults.validVariants.length}get invalidVariantCount(){return this.args.checkResults.outOfBounds.length+this.args.checkResults.referenceMismatch.length+this.args.checkResults.wildType.length}setDisabled(e,t){t?e.setAttribute("disabled",""):e.removeAttribute("disabled")}uncheckClear(e){document.querySelector("#clearCheck").checked=!1}clearCheckChanged(e){this.clearChecked=e.target.checked}},s=u(l.prototype,"clearChecked",[n.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u(l.prototype,"clearCheckChanged",[i.action],Object.getOwnPropertyDescriptor(l.prototype,"clearCheckChanged"),l.prototype),l);(0,t.setComponentTemplate)(c,d)}),define("kell/components/variant-input",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","bootstrap","@ember/template-factory"],function(e,t,r,n,i,a,o,l){var s,u,c,d
function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const f=(0,l.createTemplateFactory)({id:"3QvEAP1k",block:'[[[11,0],[17,1],[24,0,"variant-input my-3"],[12],[1,"\\n\\t"],[10,0],[14,0,"mb-1"],[12],[1,"\\n\\t  "],[10,"label"],[14,"for","floatingTextarea"],[12],[1,"Enter variants"],[13],[1,"\\n\\t  "],[11,"textarea"],[24,0,"form-control"],[24,"placeholder","G415D, S726C, etc."],[24,1,"floatingTextarea"],[4,[38,3],["input",[30,0,["inputChanged"]]],null],[12],[13],[1,"\\n\\t"],[13],[1,"\\n\\t"],[10,0],[14,0,"text-end"],[12],[1,"\\n\\t\\t"],[11,"button"],[24,0,"btn btn-secondary btn-sm"],[24,4,"button"],[4,[38,3],["click",[30,0,["clearInput"]]],null],[4,[38,5],[[30,0,["textEmpty"]]],null],[12],[1,"Clear"],[13],[1,"\\n\\t\\t"],[11,"button"],[24,0,"btn btn-primary btn-sm"],[24,4,"button"],[4,[38,3],["click",[30,0,["parseInput"]]],null],[4,[38,5],[[30,0,["textEmpty"]]],null],[12],[1,"Parse"],[13],[1,"\\n\\t"],[13],[1,"\\n\\t"],[8,[39,6],null,[["@checkResults","@onCancel","@onOk"],[[30,0,["checkResults"]],[30,0,["dialogCanceled"]],[30,0,["addVariants"]]]],null],[1,"\\n"],[13],[1,"\\n\\n"]],["&attrs"],["div","label","textarea","on","button","set-disabled","variant-input-modal"]]',moduleName:"kell/components/variant-input.hbs",isStrictMode:!1})
let m=e.default=(s=class extends r.default{constructor(){super(...arguments),p(this,"text",u,this),p(this,"checkResults",c,this),p(this,"data",d,this),this.clearCheckResults()}clearInput(){const e=document.querySelector(".variant-input textarea")
e.value=""
let t=new InputEvent("input")
e.dispatchEvent(t)}parseInput(){this.clearCheckResults()
const e=this.text.toUpperCase().match(this.data.mutationRegEx)
e?this.checkResults=this.data.checkMutations(e):this.clearCheckResults(),this.openModal()}clearCheckResults(){this.checkResults={validVariants:[],outOfBounds:[],referenceMismatch:[],wildType:[]}}openModal(){o.default.Modal.getOrCreateInstance(document.getElementById("parseResults")).show()}dialogCanceled(){}addVariants(e){e&&this.data.clearMutations(),this.data.addMutations(this.checkResults.validVariants),this.clearInput()}inputChanged(e){const t=e.target
this.text=t.value}get textEmpty(){return!this.text||0==this.text.length}},u=b(s.prototype,"text",[n.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(s.prototype,"checkResults",[n.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b(s.prototype,"data",[a.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b(s.prototype,"clearInput",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"clearInput"),s.prototype),b(s.prototype,"parseInput",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"parseInput"),s.prototype),b(s.prototype,"clearCheckResults",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"clearCheckResults"),s.prototype),b(s.prototype,"openModal",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"openModal"),s.prototype),b(s.prototype,"dialogCanceled",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"dialogCanceled"),s.prototype),b(s.prototype,"addVariants",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"addVariants"),s.prototype),b(s.prototype,"inputChanged",[i.action],Object.getOwnPropertyDescriptor(s.prototype,"inputChanged"),s.prototype),s);(0,t.setComponentTemplate)(f,m)}),define("kell/components/variant-selector",["exports","@ember/component","@glimmer/component","@ember/service","@ember/object","ember-math-helpers/helpers/sub","ember-math-helpers/helpers/mult","ember-math-helpers/helpers/sum","@ember/template-factory"],function(e,t,r,n,i,a,o,l,s){var u,c
function d(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const p=(0,s.createTemplateFactory)({id:"XgFgLJlS",block:'[[[11,0],[17,1],[24,0,"variant-selector card noselect arrow-box"],[4,[38,1],["click",[30,0,["stopPropagation"]]],null],[12],[1,"\\n\\t"],[10,0],[14,0,"card-header text-center"],[12],[1,"Select variants at "],[1,[30,2]],[13],[1,"\\n\\t"],[10,0],[14,0,"card-body"],[12],[1,"\\n"],[42,[28,[37,3],[[28,[37,3],[[30,0,["data","chunkedAcids"]]],null]],null],null,[[[1,"\\t\\t\\t"],[10,0],[14,0,"chunk-block"],[12],[1,"\\n"],[42,[28,[37,3],[[28,[37,3],[[30,3]],null]],null],null,[[[44,[[28,[37,5],[[30,7],[30,2],[30,5]],null]],[[[44,[[28,[30,0,["data","isHypotheticalVariant"]],[[30,8]],null],[28,[30,0,["data","getColor"]],[[30,8]],null]],[[[1,"\\t\\t\\t\\t\\t\\t\\t"],[10,0],[14,0,"acid-checkbox"],[12],[1,"\\n\\t\\t\\t\\t\\t\\t\\t\\t"],[11,"input"],[24,0,"btn-check"],[16,1,[28,[37,5],["btn-check-",[30,5]],null]],[24,"autocomplete","off"],[24,4,"checkbox"],[4,[30,0,["setDisabled"]],[[28,[37,7],[[30,5],[30,7]],null]],null],[4,[30,0,["setChecked"]],[[28,[30,0,["data","mutationActive"]],[[30,2],[30,5],true],null]],null],[4,[38,1],["change",[28,[37,8],[[30,0,["checkChanged"]],[30,5]],null]],null],[12],[13],[1,"\\n\\t\\t\\t\\t\\t\\t\\t\\t"],[10,"label"],[15,0,[29,["btn btn-sm font-monospace mutation-acid ",[30,10]," ",[52,[28,[37,7],[[30,5],[30,7]],null],"ref"]]]],[15,"for",[28,[37,5],["btn-check-",[30,5]],null]],[12],[1,[30,5]],[13],[1,"\\n\\t\\t\\t\\t\\t\\t\\t"],[13],[1,"\\n"]],[9,10]]]],[8]]]],[5,6]],null],[1,"\\t\\t\\t"],[13],[1,"\\n"]],[3,4]],null],[1,"\\t"],[13],[1,"\\n\\t"],[10,0],[14,0,"card-footer text-end d-flex justify-content-between"],[12],[1,"\\n\\t\\t"],[11,"button"],[24,0,"btn btn-primary btn-sm"],[24,4,"button"],[4,[38,1],["click",[30,0,["togglePositionMarking"]]],null],[12],[1,[52,[30,0,["marked"]],"Unmark","Mark"]],[1," locus"],[13],[1,"\\n\\t  "],[11,"button"],[24,0,"btn btn-primary btn-sm"],[24,4,"button"],[4,[30,0,["setDisabled"]],[[28,[37,12],[[30,11]],null]],null],[4,[38,1],["click",[28,[37,8],[[30,0,["data","clearLocus"]],[30,2],true],null]],null],[12],[1,"Clear locus variants"],[13],[1,"\\n\\t"],[13],[1,"\\n"],[13]],["&attrs","@pos","chunk","idx","a","ai","@ref","variant","hypo","color","@mutationActive"],["div","on","each","-track-array","let","concat","input","eq","fn","label","if","button","not"]]',moduleName:"kell/components/variant-selector.hbs",isStrictMode:!1})
let b=e.default=(u=class extends r.default{constructor(...e){var t,r,n,i
super(...e),t=this,r="data",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}stopPropagation(e){return e.stopPropagation(),!1}get marked(){return"A"==this.data.manuallySelectedResidue?.chain&&this.data.manuallySelectedResidue?.position==this.args.pos}mutClicked(e){this.args.ref!=e&&this.data.toggleMutation(this.args.pos,e,!0)}checkChanged(e,t){t.target.checked?this.data.addMutation(this.args.pos,e,!0):this.data.removeMutation(this.args.pos,e,!0)}togglePositionMarking(){this.marked?this.data.clearManuallySelectedResidue():this.data.setManuallySelectedResidue(this.args.pos)}setChecked(e,t){e.checked=!!t}setDisabled(e,t){t?e.setAttribute("disabled",""):e.removeAttribute("disabled")}},c=d(u.prototype,"data",[n.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d(u.prototype,"mutClicked",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"mutClicked"),u.prototype),d(u.prototype,"checkChanged",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"checkChanged"),u.prototype),d(u.prototype,"togglePositionMarking",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"togglePositionMarking"),u.prototype),d(u.prototype,"setChecked",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"setChecked"),u.prototype),d(u.prototype,"setDisabled",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"setDisabled"),u.prototype),u);(0,t.setComponentTemplate)(p,b)}),define("kell/data-adapter",["exports","@ember-data/debug/data-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/deprecation-workflow",["ember-cli-deprecation-workflow"],function(e){(0,e.default)({throwOnUnhandled:!1,workflow:[]})}),define("kell/helpers/abs",["exports","ember-math-helpers/helpers/abs"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/acos",["exports","ember-math-helpers/helpers/acos"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/acosh",["exports","ember-math-helpers/helpers/acosh"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/add",["exports","ember-math-helpers/helpers/add"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/and",["exports","ember-truth-helpers/helpers/and"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/app-version",["exports","@ember/component/helper","kell/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,r,n){function i(e,t={}){const i=r.default.APP.version
let a=t.versionOnly||t.hideSha,o=t.shaOnly||t.hideVersion,l=null
return a&&(t.showExtended&&(l=i.match(n.versionExtendedRegExp)),l||(l=i.match(n.versionRegExp))),o&&(l=i.match(n.shaRegExp)),l?l[0]:i}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=i,e.default=void 0
e.default=(0,t.helper)(i)}),define("kell/helpers/asin",["exports","ember-math-helpers/helpers/asin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/asinh",["exports","ember-math-helpers/helpers/asinh"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/atan",["exports","ember-math-helpers/helpers/atan"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/atan2",["exports","ember-math-helpers/helpers/atan2"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/atanh",["exports","ember-math-helpers/helpers/atanh"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/cbrt",["exports","ember-math-helpers/helpers/cbrt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/ceil",["exports","ember-math-helpers/helpers/ceil"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/clz32",["exports","ember-math-helpers/helpers/clz32"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("kell/helpers/cos",["exports","ember-math-helpers/helpers/cos"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/cosh",["exports","ember-math-helpers/helpers/cosh"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/div",["exports","ember-math-helpers/helpers/div"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/eq",["exports","ember-truth-helpers/helpers/eq"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/exp",["exports","ember-math-helpers/helpers/exp"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/expm1",["exports","ember-math-helpers/helpers/expm1"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/floor",["exports","ember-math-helpers/helpers/floor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/fround",["exports","ember-math-helpers/helpers/fround"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/gcd",["exports","ember-math-helpers/helpers/gcd"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/gt",["exports","ember-truth-helpers/helpers/gt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/gte",["exports","ember-truth-helpers/helpers/gte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/hypot",["exports","ember-math-helpers/helpers/hypot"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/imul",["exports","ember-math-helpers/helpers/imul"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/is-array",["exports","ember-truth-helpers/helpers/is-array"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/is-empty",["exports","ember-truth-helpers/helpers/is-empty"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/is-equal",["exports","ember-truth-helpers/helpers/is-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/lcm",["exports","ember-math-helpers/helpers/lcm"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/log-e",["exports","ember-math-helpers/helpers/log-e"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/log10",["exports","ember-math-helpers/helpers/log10"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/log1p",["exports","ember-math-helpers/helpers/log1p"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/log2",["exports","ember-math-helpers/helpers/log2"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/lt",["exports","ember-truth-helpers/helpers/lt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/lte",["exports","ember-truth-helpers/helpers/lte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/max",["exports","ember-math-helpers/helpers/max"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/min",["exports","ember-math-helpers/helpers/min"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/mod",["exports","ember-math-helpers/helpers/mod"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/mult",["exports","ember-math-helpers/helpers/mult"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/not-eq",["exports","ember-truth-helpers/helpers/not-eq"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/not",["exports","ember-truth-helpers/helpers/not"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/number-to-array",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return new Array(e)}})
define("kell/helpers/or",["exports","ember-truth-helpers/helpers/or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/page-title",["exports","ember-page-title/helpers/page-title"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/pow",["exports","ember-math-helpers/helpers/pow"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/random",["exports","ember-math-helpers/helpers/random"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/replace-pipe",["exports","@ember/component/helper","@ember/template"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.helper)(function([e,...t]){return(0,r.htmlSafe)(e.split("|").map(e=>e.trim()).filter(e=>e.length>0).join("<br>"))})}),define("kell/helpers/round",["exports","ember-math-helpers/helpers/round"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/sign",["exports","ember-math-helpers/helpers/sign"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/sin",["exports","ember-math-helpers/helpers/sin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/sqrt",["exports","ember-math-helpers/helpers/sqrt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/sub",["exports","ember-math-helpers/helpers/sub"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/sum",["exports","ember-math-helpers/helpers/sum"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/tan",["exports","ember-math-helpers/helpers/tan"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/tanh",["exports","ember-math-helpers/helpers/tanh"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/trunc",["exports","ember-math-helpers/helpers/trunc"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/helpers/xor",["exports","ember-truth-helpers/helpers/xor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","kell/config/environment"],function(e,t,r){let n,i
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r.default.APP&&(n=r.default.APP.name,i=r.default.APP.version)
e.default={name:"App Version",initialize:(0,t.default)(n,i)}}),define("kell/initializers/ember-data",["exports","@ember-data/request-utils/deprecation-support"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"ember-data",initialize(e){e.registerOptionsForType("serializer",{singleton:!1}),e.registerOptionsForType("adapter",{singleton:!1})}}}),define("kell/initializers/install-function-modifier-manager",["exports","ember-functions-as-modifiers-polyfill/initializers/install-function-modifier-manager"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"initialize",{enumerable:!0,get:function(){return t.initialize}})}),define("kell/modifiers/is-first-column",["exports","ember-modifier"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.modifier)(function(e){function t(){const t=0==e.offsetLeft,r=e.classList.contains("first-column")
t&&!r&&e.classList.add("first-column"),!t&&r&&e.classList.remove("first-column")}return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}})}),define("kell/modifiers/on-outside-click",["exports","ember-modifier"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.modifier)(function(e,[t]){function r(r){e.contains(r.target)||t(r,e)}return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}})}),define("kell/modifiers/on-resize",["exports","ember-on-resize-modifier/modifiers/on-resize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/modifiers/set-disabled",["exports","ember-modifier"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.modifier)(function(e,[t]){return t?e.setAttribute("disabled",""):e.removeAttribute("disabled"),()=>{}})}),define("kell/router",["exports","@ember/routing/router","kell/config/environment"],function(e,t,r){function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var n=r.call(e,t||"default")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class i extends t.default{constructor(...e){super(...e),n(this,"location",r.default.locationType),n(this,"rootURL",r.default.rootURL)}}e.default=i,i.map(function(){})}),define("kell/routes/application",["exports","@ember/routing/route","@ember/service"],function(e,t,r){var n,i,a
function o(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function l(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(n=class extends t.default{constructor(...e){super(...e),o(this,"data",i,this),o(this,"theme",a,this)}async beforeModel(e){return this.theme.initTheme(),this.loadData()}async loadData(){try{await this.data.loadData()}catch(e){console.log(e)}}},i=l(n.prototype,"data",[r.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=l(n.prototype,"theme",[r.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n)}),define("kell/services/data",["exports","@ember/service","@glimmer/tracking","@ember/object","tracked-built-ins","kell/services/config/environment"],function(e,t,r,n,i,a){var o,l,s,u,c,d,p,b,f,m,h,g,y
function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(o=class extends t.default{setManuallySelectedResidue(e,t="A"){this.manuallySelectedResidue={position:e,chain:t}}clearManuallySelectedResidue(){this.manuallySelectedResidue=null}get selectedPosition(){return this.manuallySelectedPosition?this.manuallySelectedPosition:this.selectedVariant?parseInt(this.selectedVariant.slice(1,-1)):void 0}get selectedResidue(){return this.manuallySelectedResidue?this.manuallySelectedResidue:this.selectedVariant?{position:parseInt(this.selectedVariant.slice(1,-1)),chain:"A"}:void 0}setHoveredResidue(e,t="A"){this.hoveredResidue={position:e,chain:t}}clearHoveredResidue(){this.hoveredResidue=null}constructor(){super(),v(this,"sequenceChunkSize",l,this),v(this,"sequenceString",s,this),v(this,"acidsChunkSize",u,this),v(this,"aminoAcids",c,this),v(this,"mutations",d,this),v(this,"data",p,this),v(this,"dataReady",b,this),v(this,"selectedVariant",f,this),v(this,"manuallySelectedPosition",m,this),v(this,"manuallySelectedResidue",h,this),v(this,"hoveredResidue",g,this),v(this,"surroundings",y,this),this.clearMutations()}get variantTexts(){let e=null
if(this.selectedVariant&&this.data.records[this.selectedVariant]){const t=this.data.records[this.selectedVariant],r=this.data.agMessages[t.agMessage],n=this.data.destabMessages[t.destabMessage]
e={variant:this.selectedVariant,agMessage:r,destabMessage:n}}return e}get mutationsArray(){return this.mutations.map((e,t)=>e.map((e,r)=>e?this.sequenceString[t]+(t+1)+this.aminoAcids[r]:e).filter(e=>e)).filter(e=>e.length>0).flat()}get sequence(){return this.sequenceString.split("")}get chunkedSequence(){let e=this.sequenceChunkSize
return this.sequence.reduce((t,r,n,i)=>(n%e==0&&t.push(i.slice(n,n+e)),t),[])}get chunkedAcids(){let e=this.acidsChunkSize
return this.aminoAcids.reduce((t,r,n,i)=>(n%e==0&&t.push(i.slice(n,n+e)),t),[])}get acidsString(){return this.aminoAcids.join()}get mutationRegEx(){return new RegExp(`[${this.acidsString}][0-9]+[${this.acidsString}]`,"g")}get allMutations(){const e=[]
return this.sequence.forEach((t,r)=>{this.aminoAcids.forEach(n=>{t!=n&&e.push(t+(r+1)+n)})}),e}get allMutationsString(){return this.allMutations?this.allMutations.join(", "):""}get mutationsData(){return this.mutationsArray.map(e=>({...this.data.records[e],variant:e}))}clearMutations(){this.mutations=new i.TrackedArray([...new Array(this.sequenceString.length)].map(e=>new i.TrackedArray([...new Array(this.aminoAcids.length)].map(e=>!1))))}copyAllMutationsToClipboard(){navigator.clipboard.writeText(this.allMutationsString)}addMutation(e,t,r=!1){const n=e-(r?1:0),i=this.aminoAcids.indexOf(t)
n<0||n>=this.mutations.length?console.log("index out of bounds"):-1!=i?this.mutations[n][i]=!0:console.log("unknown amino acid")}removeMutation(e,t,r=!1){const n=e-(r?1:0),i=this.aminoAcids.indexOf(t)
n<0||n>=this.mutations.length?console.log("index out of bounds"):-1!=i?this.mutations[n][i]=!1:console.log("unknown amino acid")}clearLocus(e,t=!1){console.log(arguments)
const r=e-(t?1:0)
r<0||r>=this.mutations.length?console.log("index out of bounds"):this.mutations[r].fill(!1)}toggleMutation(e,t,r=!1){const n=e-(r?1:0),i=this.aminoAcids.indexOf(t)
n<0||n>=this.mutations.length?console.log("index out of bounds"):-1!=i?(this.mutations[n][i]=!this.mutations[n][i],console.log(this.mutationsArray)):console.log("unknown amino acid")}anyMutationActive(e,t=!1){if(null==e)return console.log("idx undefined :o"),!1
const r=e-(t?1:0)
return r<0||r>=this.mutations.length?(console.log("index out of bounds"),!1):this.mutations[r].some(e=>e)}mutationActive(e,t,r=!1){if(null==e)return console.log("idx undefined :o"),!1
const n=e-(r?1:0),i=this.aminoAcids.indexOf(t)
return n<0||n>=this.mutations.length?(console.log("index out of bounds"),!1):-1==i?(console.log("unknown amino acid"),!1):this.mutations[n][i]}splitMutation(e){return[parseInt(e.slice(1,-1)),e[0],e[e.length-1]]}checkMutations(e){const t=new Set,r=new Set,n=new Set,i=new Set
return e.forEach(e=>{const[a,o,l]=this.splitMutation(e),s=a-1
s<0||s>=this.sequenceString.length?r.add(e):o!=this.sequenceString[s]?n.add(e):l==this.sequenceString[s]?i.add(e):t.add(e)}),console.log("out of bounds",r),console.log("reference mismatch",n),console.log("ref = alt",i),console.log(t),{validVariants:[...t],outOfBounds:[...r],referenceMismatch:[...n],wildType:[...i]}}addMutations(e){e.forEach(e=>{const[t,r,n]=this.splitMutation(e)
this.addMutation(t,n,!0)})}isHypotheticalVariant(e){return!!this.data.records[e]&&0==this.data.records[e].varType}getColor(e){return this.data.records[e]?this.data.colors[this.data.records[e].color]:""}getColorsAtSeqIdx(e){const t=this.sequence[e],r=this.aminoAcids.filter(e=>e!=t).map(r=>t+(e+1)+r).map(e=>this.getColor(e))
return[...new Set(r)].filter(e=>"black"!=e)}async loadData(){await fetch(a.default.rootURL+"assets/kelldata.json").then(e=>e.json()).then(e=>{this.set("data",e),this.set("dataReady",!0)})}},l=P(o.prototype,"sequenceChunkSize",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),s=P(o.prototype,"sequenceString",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"MEGGDQSEEEPRERSQAGGMGTLWSQESTPEERLPVEGSRPWAVARRVLTAILILGLLLCFSVLLFYNFQNCGPRPCETSVCLDLRDHYLASGNTSVAPCTDFFSFACGRAKETNNSFQELATKNKNRLRRILEVQNSWHPGSGEEKAFQFYNSCMDTLAIEAAGTGPLRQVIEELGGWRISGKWTSLNFNRTLRLLMSQYGHFPFFRAYLGPHPASPHTPVIQIDQPEFDVPLKQDQEQKIYAQIFREYLTYLNQLGTLLGGDPSKVQEHSSLSISITSRLFQFLRPLEQRRAQGKLFQMVTIDQLKEMAPAIDWLSCLQATFTPMSLSPSQSLVVHDVEYLKNMSQLVEEMLLKQRDFLQSHMILGLVVTLSPALDSQFQEARRKLSQKLRELTEQPPMPARPRWMKCVEETGTFFEPTLAALFVREAFGPSTRSAAMKLFTAIRDALITRLRNLPWMNEETQNMAQDKVAQLQVEMGASEWALKPELARQEYNDIQLGSSFLQSVLSCVRSLRARIVQSFLQPHPQHRWKVSPWDVNAYYSVSDHVVVFPAGLLQPPFFHPGYPRAVNFGAAGSIMAHELLHIFYQLLLPGGCLACDNHALQEAHLCLKRHYAAFPLPSRTSFNDSLTFLENAADVGGLAIALQAYSKRLLRHHGETVLPSLDLSPQQIFFRSYAQVMCRKPSPQDSHDTHSPPHLRVHGPLSSTPAFARYFRCARGALLNPSSRCQLW"}}),u=P(o.prototype,"acidsChunkSize",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),c=P(o.prototype,"aminoAcids",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["A","R","N","D","C","Q","E","G","H","I","L","K","M","F","P","S","T","W","Y","V"]}}),d=P(o.prototype,"mutations",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=P(o.prototype,"data",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P(o.prototype,"dataReady",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=P(o.prototype,"selectedVariant",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P(o.prototype,"manuallySelectedPosition",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=P(o.prototype,"manuallySelectedResidue",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P(o.prototype,"setManuallySelectedResidue",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"setManuallySelectedResidue"),o.prototype),P(o.prototype,"clearManuallySelectedResidue",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"clearManuallySelectedResidue"),o.prototype),g=P(o.prototype,"hoveredResidue",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P(o.prototype,"setHoveredResidue",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"setHoveredResidue"),o.prototype),P(o.prototype,"clearHoveredResidue",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"clearHoveredResidue"),o.prototype),y=P(o.prototype,"surroundings",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P(o.prototype,"mutationsArray",[r.cached],Object.getOwnPropertyDescriptor(o.prototype,"mutationsArray"),o.prototype),P(o.prototype,"sequence",[r.cached],Object.getOwnPropertyDescriptor(o.prototype,"sequence"),o.prototype),P(o.prototype,"chunkedSequence",[r.cached],Object.getOwnPropertyDescriptor(o.prototype,"chunkedSequence"),o.prototype),P(o.prototype,"chunkedAcids",[r.cached],Object.getOwnPropertyDescriptor(o.prototype,"chunkedAcids"),o.prototype),P(o.prototype,"acidsString",[r.cached],Object.getOwnPropertyDescriptor(o.prototype,"acidsString"),o.prototype),P(o.prototype,"mutationRegEx",[r.cached],Object.getOwnPropertyDescriptor(o.prototype,"mutationRegEx"),o.prototype),P(o.prototype,"clearMutations",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"clearMutations"),o.prototype),P(o.prototype,"copyAllMutationsToClipboard",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"copyAllMutationsToClipboard"),o.prototype),P(o.prototype,"clearLocus",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"clearLocus"),o.prototype),P(o.prototype,"toggleMutation",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"toggleMutation"),o.prototype),P(o.prototype,"anyMutationActive",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"anyMutationActive"),o.prototype),P(o.prototype,"mutationActive",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"mutationActive"),o.prototype),P(o.prototype,"checkMutations",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"checkMutations"),o.prototype),P(o.prototype,"addMutations",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"addMutations"),o.prototype),P(o.prototype,"isHypotheticalVariant",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"isHypotheticalVariant"),o.prototype),P(o.prototype,"getColor",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"getColor"),o.prototype),P(o.prototype,"getColorsAtSeqIdx",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"getColorsAtSeqIdx"),o.prototype),o)}),define("kell/services/page-title",["exports","ember-page-title/services/page-title"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/services/resize-observer",["exports","ember-resize-observer-service/services/resize-observer"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("kell/services/store",["exports","@ember/debug","ember-data/store"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.default}})}),define("kell/services/table-data",["exports","@ember/service","@glimmer/tracking","@ember/object","tracked-built-ins"],function(e,t,r,n,i){var a,o,l,s,u,c,d
function p(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function b(e,t,r,n,i){var a={}
return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer?(Object.defineProperty(e,t,a),null):a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(a=class extends t.default{constructor(...e){super(...e),p(this,"data",o,this),p(this,"pageSize",l,this),p(this,"pageIndex",s,this),p(this,"searchTerm",u,this),p(this,"sortColumn",c,this),p(this,"sortDescending",d,this)}get variantsData(){return this.data.mutationsArray.map(e=>({variant:e,...this.data.data.records[e]}))}get filteredVariantsData(){if(!this.searchTerm||0==this.searchTerm.length)return this.variantsData
const e=this.data.data.varTypes.filter(e=>e.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1).map(e=>this.data.data.varTypes.indexOf(e))
return this.variantsData.filter(t=>t.variant.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1||e.indexOf(t.varType)>-1)}get sortedVariantsData(){switch(this.sortColumn){case"destabScore":return this.filteredVariantsData.sort((e,t)=>this.sortByScore("destabScore",e,t))
case"agScore":return this.filteredVariantsData.sort((e,t)=>this.sortByScore("agScore",e,t))
case"solventAccessibility":return this.filteredVariantsData.sort((e,t)=>this.sortByNumber("solventAccessibility",e,t,!0,!0))
case"maf":return this.filteredVariantsData.sort((e,t)=>this.sortByNumber("maf",e,t))
case"label":return this.filteredVariantsData.sort((e,t)=>this.sortByCat("label",e,t))
case"varType":return this.filteredVariantsData.sort((e,t)=>this.sortByCat("varType",e,t))
default:return this.filteredVariantsData.sort(this.sortByVariant)}}get paginatedVariantsData(){const e=this.pageIndex*this.pageSize,t=e+this.pageSize
return this.sortedVariantsData.slice(e,t)}get pageCount(){return 0==this.filteredVariantsData.length?0:Math.ceil(this.filteredVariantsData.length/this.pageSize)}sortByScore(e,t,r){t.fixed,r.fixed
if(t.fixed==r.fixed)return this.sortByNumber(e,t,r)
if(t.fixed){return(0==t[e]?-1:1)*(this.sortDescending?-1:1)}return(0==r[e]?1:-1)*(this.sortDescending?-1:1)}sortByNumber(e,t,r,n=!1,i=!1){const a=t[e],o=r[e]
if(a==o)return this.sortByVariant(t,r,!0)
{let e,t=!1
return null==a?(e=i?1:-1,t=!0):null==o?(e=i?-1:1,t=!0):e=a-o,e*(!this.sortDescending||t&&n?1:-1)}}sortByCat(e,t,r){const n=this.data.data[e+"s"][t[e]],i=this.data.data[e+"s"][r[e]],a=n.localeCompare(i,"en")
return 0==a?this.sortByVariant(t,r,!0):a*(this.sortDescending?-1:1)}sortByVariant(e,t,r=!1){const[n,i,a]=this.data.splitMutation(e.variant),[o,l,s]=this.data.splitMutation(t.variant)
if(n!=o)return(n-o)*(this.sortDescending&&!r?-1:1)
return(this.data.aminoAcids.indexOf(a)-this.data.aminoAcids.indexOf(s))*(this.sortDescending&&!r?-1:1)}setPageSize(e){const t=this.pageIndex,r=this.pageSize*t+1,n=Math.floor(r/e)
this.pageSize=e,this.pageIndex=n}setFilter(e){this.searchTerm!=e&&(this.searchTerm=e,this.pageIndex=0)}setPageIndex(e,t){t&&t.preventDefault(),e>=0&&e<this.pageCount&&(this.pageIndex=e)}setSortColumn(e,t=!1){this.sortColumn=e,this.sortDescending=t}get selectedVariantInTable(){return this.variantInTable(this.data.selectedVariant)}variantInTable(e){return this.filteredVariantsData.length>0&&e&&this.filteredVariantsData.findIndex(t=>t.variant==e)>-1}getNextVariant(e){if(0==this.filteredVariantsData.length)return null
const t=this.sortedVariantsData.findIndex(t=>t.variant==e)
return t>-1&&t+1<this.sortedVariantsData.length?this.sortedVariantsData[t+1].variant:null}getPreviousVariant(e){if(0==this.filteredVariantsData.length)return null
const t=this.sortedVariantsData.findIndex(t=>t.variant==e)
return t>-1&&t-1>=0?this.sortedVariantsData[t-1].variant:null}setSelectedVariant(e){const t=this.sortedVariantsData.findIndex(t=>t.variant==e)
if(-1==t)return
const r=Math.floor(t/this.pageSize)
this.data.selectedVariant=e,this.pageIndex!=r&&(this.pageIndex=r)}},o=b(a.prototype,"data",[t.service],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=b(a.prototype,"pageSize",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),s=b(a.prototype,"pageIndex",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=b(a.prototype,"searchTerm",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(a.prototype,"sortColumn",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"variant"}}),d=b(a.prototype,"sortDescending",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b(a.prototype,"variantsData",[r.cached],Object.getOwnPropertyDescriptor(a.prototype,"variantsData"),a.prototype),b(a.prototype,"filteredVariantsData",[r.cached],Object.getOwnPropertyDescriptor(a.prototype,"filteredVariantsData"),a.prototype),b(a.prototype,"sortedVariantsData",[r.cached],Object.getOwnPropertyDescriptor(a.prototype,"sortedVariantsData"),a.prototype),b(a.prototype,"paginatedVariantsData",[r.cached],Object.getOwnPropertyDescriptor(a.prototype,"paginatedVariantsData"),a.prototype),b(a.prototype,"sortByScore",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"sortByScore"),a.prototype),b(a.prototype,"sortByNumber",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"sortByNumber"),a.prototype),b(a.prototype,"sortByCat",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"sortByCat"),a.prototype),b(a.prototype,"sortByVariant",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"sortByVariant"),a.prototype),b(a.prototype,"setPageSize",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"setPageSize"),a.prototype),b(a.prototype,"setFilter",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"setFilter"),a.prototype),b(a.prototype,"setPageIndex",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"setPageIndex"),a.prototype),b(a.prototype,"setSortColumn",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"setSortColumn"),a.prototype),b(a.prototype,"variantInTable",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"variantInTable"),a.prototype),b(a.prototype,"getNextVariant",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"getNextVariant"),a.prototype),b(a.prototype,"getPreviousVariant",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"getPreviousVariant"),a.prototype),b(a.prototype,"setSelectedVariant",[n.action],Object.getOwnPropertyDescriptor(a.prototype,"setSelectedVariant"),a.prototype),a)}),define("kell/services/theme",["exports","@ember/service","@glimmer/tracking","@ember/object"],function(e,t,r,n){var i,a
function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var n=r.call(e,t||"default")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(i=class extends t.default{constructor(...e){var t,r,n,i
super(...e),t=this,r="currentTheme",i=this,(n=a)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),o(this,"themes",["light","dark"])}setDarkTheme(){this.currentTheme="dark",this.updateTheme()}setLightTheme(){this.currentTheme="light",this.updateTheme()}initTheme(){let e=localStorage.getItem("theme")
this.themes.indexOf(e)>-1&&(this.currentTheme=e),this.updateTheme()}updateTheme(){localStorage.setItem("theme",this.currentTheme),document.documentElement.dataset.bsTheme=this.currentTheme}},l=i.prototype,s="currentTheme",u=[r.tracked],c={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"light"}},p={},Object.keys(c).forEach(function(e){p[e]=c[e]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=u.slice().reverse().reduce(function(e,t){return t(l,s,e)||e},p),d&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(d):void 0,p.initializer=void 0),a=void 0===p.initializer?(Object.defineProperty(l,s,p),null):p,i)
var l,s,u,c,d,p})
define("kell/templates/application",["exports","@ember/template-factory"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"N7wT/Nmv",block:'[[[1,[28,[35,0],["Kell"],null]],[1,"\\n"],[10,0],[14,0,"container position-relative"],[12],[1,"\\n\\t"],[8,[39,2],null,null,null],[1,"\\n\\t"],[10,"h2"],[14,0,"text-center my-3"],[12],[1,"Kell"],[13],[1,"\\n\\t"],[8,[39,4],null,null,null],[1,"\\n\\t"],[8,[39,5],null,null,null],[1,"\\n\\t"],[8,[39,6],null,null,null],[1,"\\n\\t"],[8,[39,7],null,null,null],[1,"\\n\\t"],[8,[39,8],null,null,null],[1,"\\n\\t"],[8,[39,9],null,null,null],[1,"\\n"],[13],[1,"\\n"]],[],["page-title","div","theme-switch","h2","variant-input","sequence-view","molstar-viewer","variant-info","data-view","debug-tools"]]',moduleName:"kell/templates/application.hbs",isStrictMode:!1})}),define("kell/transforms/boolean",["exports","@ember/debug","@ember-data/serializer/transform"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.BooleanTransform}})}),define("kell/transforms/date",["exports","@ember/debug","@ember-data/serializer/transform"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.DateTransform}})}),define("kell/transforms/number",["exports","@ember/debug","@ember-data/serializer/transform"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.NumberTransform}})}),define("kell/transforms/string",["exports","@ember/debug","@ember-data/serializer/transform"],function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.StringTransform}})}),define("kell/config/environment",[],function(){try{var e="kell/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),r={default:JSON.parse(decodeURIComponent(t))}
return Object.defineProperty(r,"__esModule",{value:!0}),r}catch(n){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("kell/app").default.create({name:"kell",version:"0.0.0"})
